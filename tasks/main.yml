---
- name: Include installation tasks for Debian Buster, Ubuntu Disco Dingo or newer
  include: install-from-package.yml
  when: ((ansible_facts['distribution'] == 'Debian' and ansible_facts['distribution_major_version'] is version('10', '>=')) or
        (ansible_facts['distribution'] == 'Ubuntu' and ansible_facts['distribution_major_version'] is version('19', '>='))) and
        not install_from_binary

- name: Include installation tasks Debian Stretch, Ubuntu Bionic Beaver or older
  include: install-from-binary.yml
  when: (ansible_facts['distribution'] == 'Debian' and ansible_facts['distribution_major_version'] is version('9', '<=')) or
        (ansible_facts['distribution'] == 'Ubuntu' and ansible_facts['distribution_major_version'] is version('18.04', '<=')) or
        (install_from_binary)

- name: Include docker config tasks
  include: configure-docker-json.yml
  when: cred_helper_config.keys() | length > 0
